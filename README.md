# AI Агент для бронювання авіаквитків через Gmail

![Cover](cover.png)

Розумний агент для обробки заявок на бронювання авіаквитків через Gmail. Автоматично веде діалог з клієнтами, збирає 4 необхідні факти та логує переписку.

## Що робить

- Отримує листи з Gmail
- Аналізує запити на бронювання
- Ставить тільки відсутні питання:
  - Коли летіти? (дата)
  - Куди летіти? (місто)
  - Чи потрібна страховка? (так/ні) 
  - Скільки людей? (число)
- Пам'ятає контекст переписки
- Ігнорує зайві послуги (готелі, трансфери)
- Записує логи в Google Sheets

## Що потрібно налаштувати

### APIs та акаунти:
- Gmail OAuth2 (Google Cloud Console)
- Google Sheets API (той самий проект)
- OpenRouter API key (або інший LLM провайдер)

### Змінні середовища:
- Gmail credentials в n8n
- Google Sheets ID таблиці для логів
- OpenRouter API key

## Як працює

1. **Gmail Trigger** - ловить нові листи кожну хвилину
2. **Remove Duplicates** - прибирає повторну обробку 
3. **AI Agent** - аналізує та веде діалог (з пам'яттю)
4. **Gmail Reply** - відправляє відповідь клієнту
5. **Google Sheets** - логує всю переписку

## Пам'ять

Використовує Simple Memory n8n з ключем по thread_id - кожен клієнт = окрема пам'ять.

## Логи

Записує в Google Sheets:
- thread_id, email_from, extracted_fields, status, timestamp
